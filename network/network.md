# 计算机网络笔记

## 交换机(二层交换机)

1. 交换机的实质：多端口的网桥

2. 工作方式：全双工

3. 碰撞域：每个端口是一个碰撞域，端口之间无碰撞，大部分带有帧缓存，也有直通

   - 帧缓存比较慢
   - 直通无法过滤无效包

4. 即插即用：自学习算法（给攻击留下了漏洞）

   - 维护一个交换表
   - 即 (端口, MAC地址, 写入时间)
   - 当目标MAC地址未知时就广播
   - 当发出方的MAC地址不存在时，将其对应的端口写入交换表
   - 删除时间过久的条目

5. 冗余链路的处理(STP)

   - 选举根桥
   - 每个非根交换机选举根端口
   - 每个网段选举一个指定端口
   - 阻塞非根、非指定端口

6. 快速淘汰了集线器，星型结构的拓扑取代总线拓扑

7. VLAN

   - 出现原因：直接连接的电脑太多不利于管理，且如果交换机配置错误容易导致广播风暴

   - 802.3ac标准：以太网帧格式的拓展，加入了4Bytes的VLAN标签

     - Higher 2 Bytes： 标签类型

       - 0x8100

     - Lower 2 Bytes： 标签控制信息

       - Higher 3 bits  优先权字段
       - Middle 1 bit    用来表示MAC地址在不同的传输介质中是否以标准格式进行封装，长度为1比特。取值为0表示MAC地址以标准格式进行封装，为1表示以非标准格式封装。在以太网中，CFI取值为0

       - Lower 12 bits 标识了该帧属于哪个VLAN

   - 划分方式：

     - 按端口划分（常用）
     - 按MAC地址划分

   - 使用方式

     - VLAN的802.1q帧只在交换机间的干线中使用

     - 交换机识别到目标MAC地址/端口在同一个VLAN，且在同一个交换机内，直接转发
     - 交换机识别到目标MAC地址在同一个VLAN，但不在同一个交换机内
       - 将当前帧转为802.1q帧，标识发送方所属VLAN，通过路由表发送至下一端口
       - 当路由器接收到802.1q帧，查看

     - 

8. 

